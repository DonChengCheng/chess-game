# 网络对战测试指南

## 快速测试步骤

### 1. 确保服务器运行中
```bash
npm start
# 应该看到：服务器运行在端口 3000
```

### 2. 打开两个浏览器窗口
- **窗口1**: 打开 http://localhost:3000
- **窗口2**: 打开隐身模式，访问 http://localhost:3000

### 3. 开始对战
两个窗口都点击"快速匹配"，自动开始游戏

## 功能测试清单

### 基本功能
- [ ] 快速匹配是否正常工作
- [ ] 私人房间创建和加入
- [ ] 棋子移动是否同步
- [ ] 回合切换是否正确
- [ ] 游戏结束判定

### 网络功能
- [ ] 连接状态显示
- [ ] 断线重连（刷新页面后是否能重连）
- [ ] 对手断线提示
- [ ] 聊天功能

### 游戏规则
- [ ] 三角形只能走1格或跳2格吃子
- [ ] 圆圈只能上下左右走1格
- [ ] 吃子时中间必须是空格
- [ ] 获胜条件判定

### 特殊情况
- [ ] 撤销功能（需对方同意）
- [ ] 观战模式（第3个人加入）
- [ ] 离开房间

## 调试技巧

### 查看服务器日志
服务器会在终端显示：
- 新玩家连接
- 玩家断开连接
- 房间创建/加入

### 使用浏览器开发者工具
1. 按 F12 打开开发者工具
2. 查看 Console 标签页的日志
3. 查看 Network 标签页的 WebSocket 连接

### 模拟不同场景

#### 测试断线重连
1. 游戏进行中刷新一个浏览器窗口
2. 应该看到"对手断开连接"提示
3. 重新加入相同房间测试重连

#### 测试观战
1. 两个玩家正常对战
2. 第三个窗口加入同一房间
3. 应该进入观战模式

## 常见问题

### 无法连接
- 检查服务器是否运行中
- 检查端口3000是否被占用
- 尝试重启服务器

### 棋子不同步
- 检查网络连接
- 查看浏览器控制台错误
- 确保两个窗口都连接到同一服务器

### 快速匹配失败
- 确保两个玩家几乎同时点击
- 或使用私人房间功能